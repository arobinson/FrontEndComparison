<div class="product-list-container">
  <h1>Products</h1>
  
  @if (hasData()) {
    <table class="products-table">
      <thead>
        <tr>
          <th>Code</th>
          <th>Product Name</th>
          <th>Brands</th>
          <th>Categories</th>
          <th>Nutrition Score</th>
          <th>Image</th>
        </tr>
      </thead>
      <tbody>
        @for (product of productsResource.value()!; track product.code) {
          <tr>
            <td>
              <a [routerLink]="['/detail', product.code]" class="product-link">
                {{ product.code }}
              </a>
            </td>
            <td>{{ product.productName || 'N/A' }}</td>
            <td>{{ product.brands || 'N/A' }}</td>
            <td>{{ product.categories || 'N/A' }}</td>
            <td>{{ product.nutritionScore || 'N/A' }}</td>
            <td>
              @if (product.images.frontImageSmall) {
                <img [src]="product.images.frontImageSmall" alt="{{ product.productName }}" class="product-image">
              } @else {
                No image
              }
            </td>
          </tr>
        }
      </tbody>
    </table>
  } @else if (isLoading()) {
    <p>Loading products...</p>
  } @else if (isError()) {
    <p>Error loading products: {{ productsResource.error() }}</p>
  } @else {
    <p>No products found.</p>
  }
</div>
